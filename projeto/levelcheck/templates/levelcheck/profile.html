{% extends "levelcheck/index.html" %}

{% block content %}
    <aside>
        {% load static %}
        <img id="profile_pic" src="{% static request.user.leveluser.img_src %}">
        {% block profile %}
        <div id="profile_desc">
            <p><span>Username:</span>  {{request.user.username}}</p><br>
            <p><span>Joined:</span>  {{request.user.leveluser.joined}}</p><br>
            <p><span>Gender:</span>  {{request.user.leveluser.gender}}</p><br>
            <p><span>Birthday:</span>  {{request.user.leveluser.birthday}}</p><br>
            <p><span>Location:</span>  {{request.user.leveluser.location}}</p><br>
            <p style="max-height: 21%; overflow: auto"><span>Bio:</span>  {{request.user.leveluser.bio}}</p><br>

            <fieldset>
                <legend><span>Game Stats</span></legend>
                <p style="margin-top: 5%"><span style="color: green">⬤ </span>Playing:  {{request.user.leveluser.userstats.playing}}</p>
                <p style="margin-top: 5%"><span style="color: midnightblue">⬤ </span>Completed:  {{request.user.leveluser.userstats.completed}}</p>
                <p style="margin-top: 5%"><span style="color: yellow">⬤ </span>On-Hold:  {{request.user.leveluser.userstats.on_hold}}</p>
                <p style="margin-top: 5%"><span style="color: darkred">⬤ </span>Dropped:  {{request.user.leveluser.userstats.dropped}}</p>
                <p style="margin-top: 5%"><span style="color: grey">⬤ </span>Plan to Play:  {{request.user.leveluser.userstats.plan_to_play}}</p>
                <p style="margin-top: 5%"><span style="color: hotpink">⬤ </span>Total:  {{request.user.leveluser.userstats.total}}</p>
            </fieldset>
            <br>
            <a style="padding: 2%" class="link_button" href="{% url 'levelcheck:edit_profile' user.leveluser.id%}">Edit Profile</a>
        </div>
        {% endblock %}
    </aside>

    <div id="profile_main">
        <div style="width: 50%; height: 50%" id="top_left">
            <header><h1>GAMES</h1></header>
            <section>
                <table>
                {% for g in games %}
                <tr style="text-align: center" data-href="{% url 'levelcheck:logout' %}">
                    <td style="width: 15%"><img class="table_image" src="{{ g.img.url }}"></td>
                    <td style="font-weight: bold; font-size: 1.5em">{{ g.title }}</td>
                </tr>
                {% empty %}
                    <p>No games :(</p>
                {% endfor %}
                </table>
            </section>
            <div class="section_button">
                <a class="link_button" href="{% url 'levelcheck:all_games' %}">SEE ALL</a>
            </div>
        </div>

        <div style="width: 49.8%; height: 50%" id="top_right">
            <header><h1>FAVOURITE CHARACTERS</h1></header>
            <section>
                <table>
                {% for c in characters %}
                <tr style="text-align: center" data-href="{% url 'levelcheck:logout' %}">
                    <td style="width: 15%"><img class="table_image" src="{{ c.img.url }}"></td>
                    <td style="font-weight: bold; font-size: 1.5em">{{ c.name }}</td>
                </tr>
                {% empty %}
                    <p>No characters :(</p>
                {% endfor %}
                </table>
            </section>
            <div class="section_button">
                <a class="link_button" href="{% url 'levelcheck:all_characters' %}">SEE ALL</a>
            </div>
        </div>

        <div style="width: 50%; height: 49.7%" id="bottom_left">
            <header><h1>REVIEWS</h1></header>
            <section>

            <table>
              <tr>
                <td>Alfreds Futterkiste</td>
                <td>Maria Anders</td>
                <td>Germany</td>
              </tr>
              <tr>
                <td>Berglunds snabbköp</td>
                <td>Christina Berglund</td>
                <td>Sweden</td>
              </tr>
              <tr>
                <td>Centro comercial Moctezuma</td>
                <td>Francisco Chang</td>
                <td>Mexico</td>
              </tr>
              <tr>
                <td>Ernst Handel</td>
                <td>Roland Mendel</td>
                <td>Austria</td>
              </tr>
              <tr>
                <td>Island Trading</td>
                <td>Helen Bennett</td>
                <td>UK</td>
              </tr>
            </table>
        </section>
            <div class="section_button">
            <a class="link_button" >SEE ALL</a>
                </div>
        </div>

        <div style="width: 49.8%; height: 49.7%" id="bottom_right">
            <header><h1>DISCUSSIONS</h1></header>
            <section>

            <table>
              <tr>
                <td>Alfreds Futterkiste</td>
                <td>Maria Anders</td>
                <td>Germany</td>
              </tr>
              <tr>
                <td>Berglunds snabbköp</td>
                <td>Christina Berglund</td>
                <td>Sweden</td>
              </tr>
              <tr>
                <td>Centro comercial Moctezuma</td>
                <td>Francisco Chang</td>
                <td>Mexico</td>
              </tr>
              <tr>
                <td>Ernst Handel</td>
                <td>Roland Mendel</td>
                <td>Austria</td>
              </tr>
              <tr>
                <td>Island Trading</td>
                <td>Helen Bennett</td>
                <td>UK</td>
              </tr>
            </table>
        </section>
            <div class="section_button">
            <a class="link_button" >SEE ALL</a>
                </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const rows = document.querySelectorAll("tr[data-href]");

            rows.forEach(row => {
                row.addEventListener("click", () => {
                    window.location.href = row.dataset.href;
                });
            });
        });
    </script>
{% endblock %}